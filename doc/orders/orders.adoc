== Orders
image::doc/orders/DocOrdersOverview.png[align="center"]

The distributed order management system (DOMS) is a backend component that orchestrates incoming orders from your eCommerce shop and decides based on routing rules where and how the order can be fulfilled best to meet your consumers needs.

An order is a collection of the orderlines and some extra information, which should be fulfilled.
It is also a typical entry point to the operational processes within the fulfillmenttools platform: An order is created after the consumer went through the checkout in the online shop. The following paragraph tells about the abilities and features that are enclosed within this entity.

=== Default behaviour
An order is typically mapped to one or more <<Pickjobs>> and dispatched to <<Facilities>> for fulfillment after it has been supplied to the platform. There are Routing rules present in the system, that could be configured in order to meet certain expectations towards for example stock or geolocation based distribution. These rules apply by default to every new order, that is entering the system.
This default behaviour can be bypassed by certain information in the order message, namely the `deliverypreferences` field. If you provide an order not having this field the following default will be added:
[source,curl]
----
{
    ...
    "deliverypreferences" : [
        "shipping": {
             "servicetype": "BEST_EFFORT"
            }
    ]
    ...
}
----

The order will be **shipped** by a carrier using a **best effort** servicetype. 

=== Providing preferred delivery types per order
With fulfillmenttools platform you can currently provide a certain set of parameters that are used within the process after the picking. The order can carry the following information about the desired delivery approaches:
* the picked goods are handed over in person at the store where the pickjob was fulfilled (**Click & Collect**)
* the picked items are packed and sent via a parcel carrier to the consumer (**Delivery**, _**default**_)
[source,curl]
----
"deliveryPreferences": {
        "collect": [
            {
             "facilityRef": "28MB9nc4njINUx9rDrCU"  // The facility which the consumer has chosen to hand over the order
            }
        ]
}
----

=== Introducing Picking Sequence
It is possible to sort the pick line items and show them in an order in the app. This enhances the picking speed of the picker since the items are presented to them in the correct running order.

This can be done by providing a `PickingSequence` attribute of an pick line item. If more than one pick line item has the same `PickingSequence`, `tenantArticleId` will be used for the sorting.

[source,json]
----
{
    "article": {
        "tenantArticleId": "your-tenantArticleId",
        "title": "title",
        "imageUrl": "imageUrl",
        "attributes": [
            {
                "category": "pickingSequence", // Category must be set to `PickingSequence`
                "priority": 1, // This property will be taken into account if there are multiple `PickingSequence` attributes defined for one article, otherwise you can leave it 
                "key": "pickingSequence",
                "value": "1" // This is the value that sorts the article.  The sorting is being done in an ascending way, so the value 1 will be on top of others.
            }
        ]
    },
    "quantity": 2,
    "scannableCodes": [
        "2020249"
    ]
}
----

